<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hennie</title>
    <link rel="stylesheet" href="Hennie.css">
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner">
            <div></div><div></div><div></div>
            <div></div><div></div><div></div>
            <div></div><div></div><div></div>
        </div>        
    </div>
    

    <audio id="bg-music" loop>
        <source src="music/Ng√†y Th·∫£nh Th∆°i (Lyric Video) ÔΩú R.list ÔΩú TRONG IM ·ªû L·∫∂NG.mp3" type="audio/mpeg">
        Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.
    </audio>

    <div class="content hidden" id="mainContent">
        <h1 class="fade-in">Ch√†o m·ª´ng c·∫≠u ƒë√£ ƒë·∫øn v·ªõi 'nh√†' c·ªßa t·ªõ:3!</h1>
        <div class="room-container">
            <img src="image/phong.gif" alt="CƒÉn ph√≤ng" class="room-image">
            <div class="computer-container">
              <div class="computer"></div>
              <div class="chatbox" id="chatbox">
                  C√°i n√†y ƒë∆∞·ª£c l√†m trong 1 th√°ng 
              </div>
          </div>
            <div class="notebookBtn" onclick="openPopup()" aria-label="S·ªï tay"></div>
            <div class="doorBtn" onclick="showRainScene()" aria-label="C·ª≠a ra ngo√†i tr·ªùi m∆∞a"></div>
        </div>
    </div>


    <div class="volume-control">
        <label for="volume">üîä</label>
        <input type="range" id="volume" min="0" max="1" step="0.1" value="1">
    </div>

    <div id="popup" class="popup hidden" popoup-page="0">
        <span class="close" id="closePopup" onclick="closePopup()"></span>
        <div class="popup-content" id="popupContent">
            <img src="image/Screenshot (9).png" class="popup-img" id="popupImage" onclick="enlargeImage(this.src)" alt="">
            <div class="popup-text" id="popupText">
                <p>Ch√†o c·∫≠u! ƒê√¢y l√† m·ªôt g√≥c nh·ªè ƒë·ªÉ t·ªõ l∆∞u gi·ªØ nh·ªØng ƒëi·ªÅu ƒë√°ng y√™u~</p>
            </div>
            <div class="popup-audio" id="popupAudio">
                <audio controls id="popupMusic">
                    <source src="music/Hennie.m4a" type="audio/mp4">
                </audio>
            </div>
        </div>
        <button id="nextBtn" class="next-btn" onclick="nextPopup()" aria-label="Next">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </button>
    </div>
    <div class="rain-scene" id="rainScene">
        <button id="backBtn" class="back-button" onclick="backToRoom()">Tr·ªü l·∫°i</button>
    </div>

    <div id="imageOverlay" class="image-overlay hidden">
        <span class="close-overlay" id="closeOverlay" onclick="closeOverlay()">√ó</span>
        <img id="enlargedImage" class="enlarged-image" src="" alt="Ph√≥ng to">
    </div>

    <script>
          window.onload = function () {
    const loadingScreen = document.getElementById("loadingScreen");
    const mainContent = document.getElementById("mainContent");
    const popup = document.getElementById("popup");
    const popupImage = document.getElementById("popupImage");
    const popupText = document.getElementById("popupText");
    const popupAudioWrapper = document.getElementById("popupAudio");
    const popupAudio = popupAudioWrapper.querySelector("audio");
    const nextPageBtn = document.getElementById("nextBtn");
    const volumeControl = document.getElementById("volume");
    const rainScene = document.getElementById("rainScene");
    const backBtn = document.getElementById("backBtn");
    const bgMusic = document.getElementById("bg-music");

    let currentPage = 0;
    let musicStarted = false;
    let rainCreated = false;
    let typingTimeouts = [];

    const notebookPages = [
      { text: "Th·∫ø gi·ªõi r·ªông l·ªõn v·∫≠y m√† t·ªõ v·ªõi c·∫≠u v·∫´n t√¨m ƒë∆∞·ª£c nhau... ", audio: "music/Hennie.m4a" },
      { text: "T·ªõ h√¥ng bi·∫øt khi c·∫≠u v√†o ƒë∆∞·ª£c ƒë√¢y l√† c·∫≠u ƒëang th·∫ø n√†o nh∆∞ng m√† ngay t·∫°i ƒë√¢y t·ªõ s·∫Ω ch·ªâ t·∫≠p trung v·ªÅ c·∫≠u th√¥i n√™n ƒë√¢y s·∫Ω gi·ªëng nh∆∞ l√† m·ªôt n∆°i ƒë·ªÉ t·ªõ b√†y t·ªè c√°c suy nghƒ© c·ªßa t·ªõ v·ªÅ c·∫≠u √°. M√† tr∆∞·ªõc khi v√†o, t·ªõ mu·ªën nh·∫Øn g·ª≠i ƒë·∫øn c·∫≠u r·∫±ng cu·ªôc s·ªëng ƒë∆∞·ª£c t·∫°o n√™n t·ª´ nh·ªØng l·ªùi t·∫°m bi·ªát, n·∫øu c√≥ g·∫∑p g·ª° th√¨ s·∫Ω c√≥ chia ly, ƒë·ªëi v·ªõi t·ªõ g·∫∑p nhau ·∫Øt c√≥ duy√™n v√† n·∫øu l·ª±a ch·ªçn r·ªùi ƒëi th√¨ c√≥ nghƒ©a l√† ƒë√£ h·∫øt duy√™n r·ªìi nh∆∞ng h√¥ng v√¨ v·∫≠y m√† t·ªõ s·∫Ω r·ªùi xa c·∫≠u, t·ªõ s·∫Ω b√™n c·∫°nh c·∫≠u khi c·∫≠u c·∫ßn d√π trong b·∫•t k√¨ h√¨nh d·∫°ng n√†o, khi c·∫≠u c√≥ chuy·ªán g√¨ t·ªõ s·∫Ω ƒë·∫øn v√† √¥m l·∫•y c·∫≠u nh∆∞ c·∫≠u ƒë√£ l√†m v·ªõi t·ªõ v√† d√π th·∫ø n√†o ch√∫ng ta v·∫´n ch·ªâ l√† con ng∆∞·ªùi y·∫øu ·ªõt c√≥ th·ªÉ s·ªëng nay ch·∫øt mai nh∆∞ng nh∆∞ v·∫≠y s·∫Ω l√†m cho ch√∫ng ta qu√Ω tr·ªçng m·∫°ng s·ªëng h∆°n, d√π ch√∫ng ta c√≥ nhi·ªÅu khuy·∫øt ƒëi·ªÉm hay m·ªçi vi·ªác h√¥ng su√¥n s·∫ª nh∆∞ng b√™n c·∫°nh ƒë√≥ c√≤n c√≥ ∆∞u ƒëi·ªÉm m√† ch√∫ng ta th∆∞·ªùng h√¥ng quan t√¢m ƒë·∫øn v√† v√¨ m·ªçi chuy·ªán h√¥ng su√¥n s·∫ª n√™n m·ªõi c√≥ ta c·ªßa ng√†y h√¥m nay, d√π l√† ch·ªâ v√¨ v√†i l·ªùi n√≥i m√† c√≥ th·ªÉ khi·∫øn tinh th·∫ßn c·ªßa ch√∫ng ta r·ªõt xu·ªëng t·∫≠n h·ªë s√¢u nh∆∞ng v√¨ v·∫≠y m√† c·∫≠u c√≥ th·ªÉ bi·∫øt r·∫±ng l·ªùi n√≥i c√≥ s·ª©c s√°t th∆∞∆°ng r·∫•t cao, d√π ƒë√¥i l√∫c ta v√¥ t√¨nh l√†m t·ªïn th∆∞∆°ng ai ƒë√≥ m√† ch√∫ng ta h√¥ng bi·∫øt nh∆∞ng s√¢u xa trong ƒë√≥ v·∫´n c√≥ t√¨nh th∆∞∆°ng c·ªßa ch√∫ng ta, d√π l√† con ng∆∞·ªùi r·∫•t t·ªá nh∆∞ng m√† nh∆∞ v·∫≠y m·ªõi l√† con ng∆∞·ªùi, nh∆∞ v·∫≠y m·ªõi l√† ch√∫ng ta, v√† v√¨ ƒë√£ tr·∫£i qua nhi·ªÅu chuy·ªán m·ªõi c√≥ ch√∫ng ta, m·ªõi c√≥ Kim c·ªßa ng√†y h√¥m nay √° v√† t·ªõ mu·ªën c·∫£m ∆°n Kim v√¨ c·∫≠u ƒë√£ t·ªìn t·∫°i v√† s·ªëng ƒë·∫øn b√¢y gi·ªù, n·∫øu c·∫≠u c·∫£m th·∫•y cu·ªôc s·ªëng v√¥ nghƒ©a th√¨ mong c·∫≠u s·∫Ω nh·ªõ ƒë·∫øn t·ªõ v√¨ c·∫≠u ƒë√£ c·ª©u r·ªói t·ªõ √°, n√™n l√† ƒë·ª´ng suy nghƒ© qu√° nhi·ªÅu nh√©:3. ", audio:"music/Datto Music.mp3" },
      { text: "V√†o chuy·ªán ch√≠nh th√¥i nh·ªâ:33. T·ªõ l√† k·∫ª ch·∫≥ng ra g√¨ nh∆∞ng m√† ch·ªâ c·∫ßn nghƒ© ƒë·∫øn c·∫≠u, t·ªõ l·∫°i th·∫•y ng√†y mai s·∫Ω tr·ªü n√™n tuy·ªát v·ªùi, th·ª±c s·ª± c·∫≠u ƒë√£ c·ª©u r·ªói cu·ªôc ƒë·ªùi v√† con tim c·ªßa t·ªõ √° v√¨ c·∫≠u l√† ng∆∞·ªùi duy nh·∫•t t·ªõ t·ª´ng ƒë∆∞·ª£c c·∫£m nh·∫≠n ƒë∆∞·ª£c h∆°i ·∫•m c·ªßa con ng∆∞·ªùi v√† c≈©ng l√† ng∆∞·ªùi ƒë·∫ßu ti√™n ch·ªãu ng·ªìi l·∫Øng nghe t·ªõ n√≥i, c·∫≠u l√† ng∆∞·ªùi ƒë√£ l√†m cho cu·ªôc ƒë·ªùi t·ªõ c√≥ √Ω nghƒ©a h∆°n v√† ch√≠nh v√¨ v·∫≠y m√† t·ªõ lu√¥n mu·ªën c√≥ th·ªÉ gi√∫p c·∫≠u khi c√≥ th·ªÉ nh∆∞ng m√† b√™n c·∫°nh ƒë√≥ t·ªõ nghƒ© l√† t·ªõ l√† v·∫≠t c·∫£n n√™n t·ªõ lu√¥n mu·ªën r·ªùi ƒëi trong im l·∫∑ng ƒë·ªÉ h√¥ng c√≤n l√†m phi·ªÅn c·∫≠u n·ªØa, nh∆∞ng m√† m·ªói khi nh√¨n th·∫•y c·∫≠u phi·ªÅn l√≤ng chuy·ªán g√¨ th√¨ t·ªõ l·∫°i h√¥ng th·ªÉ m·∫∑c k·ªá ƒë∆∞·ª£c, v√¨ nh·ªØng l√∫c ƒë·∫•y t·ªõ nghƒ© kh√¥ng c√≥ ai ƒë·ªÉ s·∫ª chia h·∫≥n ph·∫£i c√¥ ƒë∆°n l·∫Øm, n·ªói c√¥ ƒë∆°n c·ªßa c·∫≠u, s·ª± v·∫Øng v·∫ª quanh t·ªõ, d√π kh√¥ng th·ªÉ l√†m n√≥ bi·∫øn m·∫•t nh∆∞ng ch·∫≥ng ph·∫£i ta c√≥ th·ªÉ c√πng nhau s·∫ª chia sao:3. Th·∫≠t ra th√¨ t·ªõ mu·ªën c·∫≠u h·∫°nh ph√∫c, t·ªõ mu·ªën c·∫≠u c√≥ th·ªÉ chia s·∫ª v·ªõi ai ƒë√≥ nh·ªØng ƒëi·ªÅu c·∫≠u y√™u th∆∞∆°ng, nh·ªØng ƒëi·ªÅu m√† c·∫≠u lu√¥n k√¨m n√©n trong tim. Kh√¥ng quan tr·ªçng ƒë√≥ l√† ai, d√π ƒë√≥ l√† Nguy√™n hay b·∫•t k√¨ ai ch·ªâ c·∫ßn ·ªü b√™n c·∫≠u v√† l√†m c·∫≠u h·∫°nh ph√∫c. Nh∆∞ v·∫≠y l√† ƒë·ªß... ", audio: "music/Datto Music2.mp3" },
      { text: "ƒê·∫øn ƒë√¢y l√† h·∫øt nh·ªØng g√¨ t·ªõ mu·ªën chia s·∫ª v·ªõi c·∫≠u r·ªìi:3. L·ªùi cu·ªëi c√πng t·ªõ mu·ªën n√≥i l√† ch√∫c c·∫≠u ng√†y c√†ng h·∫°nh ph√∫c nha, n·ª• c∆∞·ªùi c·ªßa c·∫≠u ƒë·∫πp l·∫Øm √°, n√≥ ƒë·ªß s·ª©c ƒë·ªÉ c·ª©u r·ªói m·ªôt con ng∆∞·ªùi √°:33. N·∫øu c·∫≠u bu·ªìn th√¨ c·∫≠u c·ª© kh√≥c cho ƒë√£ ƒëi r·ªìi sau ƒë√≥ h√£y ƒë·ª©ng l√™n v√† b∆∞·ªõc ti·∫øp nh√©. Thi√™n th·∫ßn c·ªßa t·ªõ.:3 ", audio: "music/Ho√†ng H√¥n Chi·ªÅu H·∫°.mp3"}
    ];

    function clearTypingEffect() {
      typingTimeouts.forEach(t => clearTimeout(t));
      typingTimeouts = [];
    }

    function typeTextEffect(element, text, speed = 40) {
      clearTypingEffect();
      element.innerHTML = '';
      let index = 0;
      function typeChar() {
        if (index < text.length) {
          const char = text.charAt(index);
          if (char === '<') {
            const close = text.indexOf('>', index);
            element.innerHTML += text.slice(index, close + 1);
            index = close + 1;
          } else {
            element.innerHTML += char;
            index++;
          }
          typingTimeouts.push(setTimeout(typeChar, speed));
        }
      }
      typeChar();
    }

    function displayNotebookPage(pageIndex) {
      const page = notebookPages[pageIndex];
      if (page.image) popupImage.src = page.image;
      else popupImage.src = "";

      if (page.text) typeTextEffect(popupText, page.text);
      else popupText.innerHTML = "";

      if (page.audio) {
        popupAudio.src = page.audio;
        popupAudio.play();
      } else {
        popupAudio.pause();
        popupAudio.removeAttribute("src");
      }

      bgMusic.pause();
      musicStarted = false;
    }

    function openPopup() {
      currentPage = 0;
      displayNotebookPage(currentPage);
      popup.classList.remove("hidden", "fade-out");
      popup.style.opacity = "1";
    }

    function closePopup() {
      popup.classList.add("hidden");
      clearTypingEffect();
      popupAudio.pause();
      popupAudio.currentTime = 0;
      if (!musicStarted) {
        bgMusic.play();
        musicStarted = true;
      }
    }

    nextPageBtn.addEventListener("click", () => {
      if (currentPage < notebookPages.length - 1) {
        currentPage++;
        displayNotebookPage(currentPage);
      }
    });

    popup.addEventListener("click", (event) => {
      if (event.target === popup) closePopup();
    });

    popupAudio.addEventListener("ended", () => {
      if (!musicStarted) {
        bgMusic.play();
        musicStarted = true;
      }
    });

    popupImage.addEventListener("click", () => {
      popupImage.classList.toggle("zoomed");
    });

    volumeControl.addEventListener("input", () => {
      const volume = parseFloat(volumeControl.value);
      bgMusic.volume = volume;
      popupAudio.volume = volume;
    });

    function createRainDrops() {
      for (let i = 0; i < 100; i++) {
        const drop = document.createElement("div");
        drop.className = "raindrop";
        drop.style.left = Math.random() * 100 + "vw";
        drop.style.animationDuration = 0.5 + Math.random() * 0.5 + "s";
        rainScene.appendChild(drop);
      }
    }

    function showRainScene() {
      mainContent.classList.add("hidden");
      rainScene.style.display = "block";
      musicStarted = false;
      if (!rainCreated) {
        createRainDrops();
        rainCreated = true;
      }
    }

    function backToRoom() {
      rainScene.style.display = "none";
      mainContent.classList.remove("hidden");
      bgMusic.play();
      musicStarted = true;
    }

    document.querySelector(".notebookBtn")?.addEventListener("click", openPopup);
    document.querySelector(".doorBtn")?.addEventListener("click", showRainScene);
    backBtn.addEventListener("click", backToRoom);

    setTimeout(() => {
      loadingScreen.classList.add("hidden");
      mainContent.classList.remove("hidden");
      document.querySelector(".fade-in")?.classList.add("visible");
      bgMusic.play();
      musicStarted = true;
    }, 2000);
  };
const computer = document.querySelector('.computer');
const chatbox = document.getElementById('chatbox');

// C√°c c√¢u random
const texts = [
    "C√°i n√†y ƒë∆∞·ª£c l√†m trong 1 th√°ng...",
    "N·∫øu t·ªõ c√≥ th·ªÉ tr·ªü th√†nh ng√¥i sao th√¨ t·ªõ c√≥ th·ªÉ d√µi theo c·∫≠u t·ª´ tr√™n tr·ªùi cao...",
    "N·∫øu c√≥ l·ªói x·∫£y ra mong c·∫≠u h√£y b·ªè qua:')",
    "T·ªõ mong c·∫≠u c√≥ th·ªÉ s·ªëng h·∫°nh ph√∫c...",
];

let typingInterval; // ƒë·ªÉ clear interval typing
let index = 0;
let selectedText = "";

computer.addEventListener('mouseenter', () => {
    chatbox.textContent = '';
    index = 0;
    // Random 1 c√¢u
    selectedText = texts[Math.floor(Math.random() * texts.length)];

    typingInterval = setInterval(() => {
        if (index < selectedText.length) {
            chatbox.textContent += selectedText[index];
            index++;
        } else {
            clearInterval(typingInterval);
        }
    }, 50); // t·ªëc ƒë·ªô g√µ ch·ªØ (ms)
});

computer.addEventListener('mouseleave', () => {
    clearInterval(typingInterval);
});


        </script>
</body>
</html>
